<html>
	<head>
		<title>SPOT Interface</title>

		<script src="build/spot.js"></script>
		<link rel="stylesheet" type="text/css" href="spot.css">

		<style>
			body {
				margin: 0px;
				font-family: Arial, Helvetica, sans-serif;
			}
			.header {
				background-color: #d0d8e0;
				/*border-top: 8px solid white;*/
				/*border-bottom: 1px solid gray;*/
				position: fixed;
				top: 0;
				padding: 13px 80px;
				z-index: 1;
				width: 100%;
			}
			.header .title {
				background-color: #3A5370;
				color: #f0ad4e;
				border-radius: 10px;
				padding: 6px 10px;
				font-weight: bold;
				font-size: 24px;
				margin-right: 30px;
			}
			.header .subtitle {
				/*color: #3A5370;*/
			}
			.below-header {
				padding: 0px 130px;
				position: absolute;
				top: 50px;
			}
			.blue-text {
				color: #07203D;
			}
			/*fieldset:not(.open) > :not(legend) {
				display: none;
			}
			fieldset legend {
				cursor: pointer;
			}
			fieldset legend:hover {
				background-color: #eee;
			}*/
			table.spaceytable td {
				padding:10px
			}
			#treeTableContainer div > * {
				vertical-align: middle;
			}
			.inline-block {
				display:inline-block
			}
			.inputContainer {
				width: 100%;
				padding-right: 5%;
				padding-left: 5%;
			}
			.inputContainer input {
				width: 90%;
				text-align: center;
			}
			.catInput {
				font-weight: bold;
				font-size: 12px;
				background-color: #ccc;
			}
			.idInput {
				font-size: 15px;
			}
			.stemSide {
				height: 55px;
			}
			.stemContainer > div.stemSide {
				height: 12px;
			}
			.treeNode {
				display: inline-block;
			}
			.treeNode:hover {
				background-color: #eee;
				cursor: pointer;
			}
			.treeNode.selected {
				background-color: #cdf;
			}
			.treeUI-tree {
				margin-top: 15px;
			}
			button {
				color: #ffffff;
				background-color: #6d86a3;
				border-color: #546D8A;
				border: 1px solid transparent;
				border-radius: 4px;
				cursor: pointer;
				font-size: 14px;
				padding: 4px 8px;
			}
			button:hover {
				background-color: #546D8A;
				border-color: #3A5370;
			}
			button.orange-button {
			    background-color: #f0ad4e;
			    border-color: #eea236;
			}
			button.orange-button:hover {
			    background-color: #ec971f;
			    border-color: #d58512;
			}
			button.submit-button {
				font-size: 16px;
				padding: 8px 20px;
			}
			fieldset {
				margin-top: 10px;
			}
			fieldset h2 {
				margin: 0px;
			}
			h2 {
				font-size: 20px;
				color: #07203D;
			}
			fieldset h3, fieldset p {
				margin: 5px;
				color: #07203D;
				font-weight: normal;
			}
			.constraint-selection-table {
				margin-left: 30px;
			}
			.constraint-selection-table td {
				padding-right:20px;
			}
			.constraint-selection-table tr:not(.constraint-checked) td:not(:first-child) {
				visibility: hidden;
			}

			.constraint-selection-table td:first-child {
				font-variant: small-caps;
				font-family: "Palatino Linotype", Garamond, serif;
				letter-spacing: 0.07em;
				font-size: 110%;
			}

			.checkbox-set-indentation {
				margin-left: 30px;
			}
			.stree-textarea {
				font-size: 11px;
				width: 100%;
			}
		</style>

	</head>
	<body>
	<div style="padding-bottom:40px">
		<div class="header">
			<span class="title">SPOT</span>
			<span class="subtitle">An application for Syntax Prosody in Optimality Theory</span>
		</div>
		<div class="below-header">
			<p>Please select all the constraints you would like to use by checking the associated checkbox for each constraint. Hover over a constraint name to see its definition. <span class="blue-text">Hover-text is not available for all constraints.</span></p>
			<ul>
				<li>By default, XP and &phiv; are selected as the cateogories to assess violations over. Use the checkbox buttons next to each constraint to change the desired category.</li>
				<li>SPOT is a JavaScript application. Make sure you have JavaScript enabled. We have tested SPOT in Firefox and Chrome, but not in Edge or Internet Explorer.</li>
				<li>The current implementation of Gen only produces recursion at the &phiv;-level, so candidates with recursive &iota;s or &omega;s will not be generated.</li>
			</ul>
			<form id="spotForm">

				<fieldset>

					<legend><h2>Syntax-prosody mapping constraints</h2></legend>

					<h3>Align/Wrap</h3>
					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td><input type="checkbox" name="constraints" value="alignLeft">Align-Left</td>
							<td><input type="checkbox" name="category-alignLeft" value="cp">CP</td>
							<td><input type="checkbox" name="category-alignLeft" value="xp" checked="checked">XP</td>
							<td><input type="checkbox" name="category-alignLeft" value="x0">X<sup>0</sup></td>
						</tr>
						<tr>
							<td><input type="checkbox" name="constraints" value="alignRight">Align-Right</td>
							<td><input type="checkbox" name="category-alignRight" value="cp">CP</td>
							<td><input type="checkbox" name="category-alignRight" value="xp" checked="checked">XP</td>
							<td><input type="checkbox" name="category-alignRight" value="x0">X<sup>0</sup></td>
						</tr>
						<tr>
							<td><input type="checkbox" name="constraints" value="wrap">Wrap</td>
							<td><input type="checkbox" name="category-wrap" value="cp">CP</td>
							<td><input type="checkbox" name="category-wrap" value="xp" checked="checked">XP</td>
							<td><input type="checkbox" name="category-wrap" value="x0">X<sup>0</sup></td>
						</tr>
					</tbody>
					</table>

					<h3>Match Theory</h3>
					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td><input type="checkbox" name="constraints" value="matchSP">MatchSP</td>
							<td><input type="checkbox" name="category-matchSP" value="cp">CP</td>
							<td><input type="checkbox" name="category-matchSP" value="xp" checked="checked">XP</td>
							<td><input type="checkbox" name="category-matchSP" value="x0">X<sup>0</sup></td>
						</tr>
						<tr>
							<td><input type="checkbox" name="constraints" value="matchPS">MatchPS</td>
							<td><input type="checkbox" name="category-matchPS" value="i">&iota;</td>
							<td><input type="checkbox" name="category-matchPS" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-matchPS" value="w">&omega;</td>
						</tr>
					</tbody>
					</table>

				</fieldset>

				<br/>

				<fieldset>

					<legend><h2>Binarity constraints</h2></legend>

					<h3>...counting branches</h3>

					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td title="Assign a violation for every pTree-node of category K that has less than two children."><input type="checkbox" name="constraints" value="binMinBranches">BinMin(branches)</td>
							<td><input type="checkbox" name="category-binMinBranches" value="i">&iota;</td>
							<td><input type="checkbox" name="category-binMinBranches" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-binMinBranches" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="Assign a violation for every pTree-node of category K that has more than two children."><input type="checkbox" name="constraints" value="binMaxBranches">BinMax(branches) - <i>categorical</i></td>
							<td><input type="checkbox" name="category-binMaxBranches" value="i">&iota;</td>
							<td><input type="checkbox" name="category-binMaxBranches" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-binMaxBranches" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="For every pTree-node N of category K, assign a violation for every child of N that is not initial or pen-initial in N."><input type="checkbox" name="constraints" value="binMaxBranchesGradient">BinMax(branches) - <i>gradient</i></td>
							<td><input type="checkbox" name="category-binMaxBranchesGradient" value="i">&iota;</td>
							<td><input type="checkbox" name="category-binMaxBranchesGradient" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-binMaxBranchesGradient" value="w">&omega;</td>
						</tr>
					</tbody>
					</table>

					<h3>...counting leaves</h3>
					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td><input type="checkbox" name="constraints" value="binMinLeaves">BinMin(leaves)</td>
							<td><input type="checkbox" name="category-binMin" value="i">&iota;</td>
							<td><input type="checkbox" name="category-binMinLeaves" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-binMinLeaves" value="w">&omega;</td>
						</tr>
						<tr>
							<td><input type="checkbox" name="constraints" value="binMaxLeaves">BinMax(leaves) - <i>categorical</i></td>
							<td><input type="checkbox" name="category-binMaxLeaves" value="i">&iota;</td>
							<td><input type="checkbox" name="category-binMaxLeaves" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-binMaxLeaves" value="w">&omega;</td>
						</tr>
						<tr>
							<td><input type="checkbox" name="constraints" value="binMaxLeavesGradient">BinMax(leaves) - <i>gradient</i></td>
							<td><input type="checkbox" name="category-binMaxLeavesGradient" value="i">&iota;</td>
							<td><input type="checkbox" name="category-binMaxLeavesGradient" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-binMaxLeavesGradient" value="w">&omega;</td>
						</tr>
					</tbody>
					</table>
				</fieldset>

				<br/>

				<fieldset>

					<legend><h2>Markedness constraints on horizontal relationships</h2></legend>
					<h3>EqualSisters</h3>
					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td title="Assign a violation for every pair of adjacent sister nodes that are not of the same prosodic category."><input type="checkbox" name="constraints" value="equalSistersAdj">EqualSisters (adjacent)</td>
							<td><input type="checkbox" name="category-equalSistersAdj" value="i">&iota;</td>
							<td><input type="checkbox" name="category-equalSistersAdj" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-equalSistersAdj" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="Assign a violation for every (unordered) pair of sisters nodes that are not of the same prosodic category."><input type="checkbox" name="constraints" value="equalSistersPairwise">EqualSisters (pairwise)</td>
							<td><input type="checkbox" name="category-equalSistersPairwise" value="i">&iota;</td>
							<td><input type="checkbox" name="category-equalSistersPairwise" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-equalSistersPairwise" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="For each set of sisters, assign a violation for every child that has a different prosodic category from the first (leftmost) sister in the set."><input type="checkbox" name="constraints" value="equalSistersFirstPrivilege">EqualSisters (first privilege)</td>
							<td><input type="checkbox" name="category-equalSistersFirstPrivilege" value="i">&iota;</td>
							<td><input type="checkbox" name="category-equalSistersFirstPrivilege" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-equalSistersFirstPrivilege" value="w">&omega;</td>
						</tr>
					</tbody>
					</table>

					<h3>StrongStart</h3>
					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td title="Assign a violation for every node whose leftmost daughter constituent is of type k and is lower in the prosodic hierarchy than its sister constituent immediately to its right: *(Kn Kn-1). (Elfner's StrongStart)"><input type="checkbox" name="constraints" value="strongStart_Elfner">StrongStart</td>
							<td><input type="checkbox" name="category-strongStart_Elfner" value="i">&iota;</td>
							<td><input type="checkbox" name="category-strongStart_Elfner" value="phi">&phiv;</td>
							<td><input type="checkbox" name="category-strongStart_Elfner" value="w" checked="checked">&omega;</td>
							<td><input type="checkbox" name="category-strongStart_Elfner" value="syll">&sigma;</td>
						</tr>
					</tbody>
					</table>

				</fieldset>

				<br/>

				<fieldset>

					<legend><h2>Markedness constraints on vertical relationships</h2></legend>
					<table class="constraint-selection-table">
					<tbody>
						<tr>
							<td title="Assign a violation for every parent-child pair (x,y) such that x is of PH-level n and y is of PH-level n-m, m >= 2."><input type="checkbox" name="constraints" value="exhaust1">Exhaustivity</td>
						</tr>
						<tr>
							<td title="Assign a violation for every node of category x immediately dominated by another node of category x."><input type="checkbox" name="constraints" value="nonRecChild">Non-recursivity, assessed by dominated node (nonRecChild)</td>
							<td><input type="checkbox" name="category-nonRecChild" value="i">&iota;</td>
							<td><input type="checkbox" name="category-nonRecChild" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-nonRecChild" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="Assign a violation for every node of category x that immediately dominates a node of category x."><input type="checkbox" name="constraints" value="nonRecParent">Non-recursivity, assessed by dominating node (nonRecParent)</td>
							<td><input type="checkbox" name="category-nonRecParent" value="i">&iota;</td>
							<td><input type="checkbox" name="category-nonRecParent" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-nonRecParent" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="&quot;Any two p-phrases that are not disjoint in extension are identical in extension.&quot; For every node x of category p dominated by another node y of category p, assign a violation for every leaf dominated by y that is not also dominated by x."><input type="checkbox" name="constraints" value="nonRecTruckenbrodt">Non-recursivity, assessed by non-overlapping leaves (nonRecTruckenbrodt)</td>
							<td><input type="checkbox" name="category-nonRecTruckenbrodt" value="i">&iota;</td>
							<td><input type="checkbox" name="category-nonRecTruckenbrodt" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-nonRecTruckenbrodt" value="w">&omega;</td>
						</tr>
						<tr>
							<td title="Assign a violation for every pair of nodes a and b such that a and b are both of category p and a dominates b."><input type="checkbox" name=constraints value="nonRecPairs">Non-recursivity, pairwise</td>
							<td><input type="checkbox" name="category-nonRecPairs" value="i">&iota;</td>
							<td><input type="checkbox" name="category-nonRecPairs" value="phi" checked="checked">&phiv;</td>
							<td><input type="checkbox" name="category-nonRecPairs" value="w">&omega;</td>
						</tr>
					</tbody>
					</table>

				</fieldset>
				<br/>

				<fieldset>
					<legend><h2>Japanese: constraints on accentedness</h2></legend>
					<p>Current evaluation of these constraints requires the id's of all words to be 'a' or 'u'.</p>
					<div class="checkbox-set-indentation">
						<input type="checkbox" name="constraints" value="accentAsHead"><b>AccentAsHead</b>: Assign a violation for each prosodic word that is not the head of a minimal &phiv;.<br/>
						<input type="checkbox" name="constraints" value="noLapseL"><b>NoLapse-L</b>: No accentual lapse. Assign a violation for every fully L-toned &omega;.<br/>
					</div>
				</fieldset>

				<br/>
				<br/>
				<hr/>
				<h2>Input syntactic tree</h2>
				<p>
					Create a JavaScript representation of your syntactic tree.
				</p>
	            <button id="startTreeUIButton" class="orange-button" type="button">Generate JS for a tree</button>
	            <div id="treeUI" style="display:none">
	                <p>String of terminals: <input type="text" name="sTreeTerminals"> <button id="goButton" type="button">Go!</button></p>
	              	<div id="treeUIinner" style="display: none">
	              		<hr/>
	              		<div>
	              			<button class="nodeEditingButton" id="treeUImakeParent" type="button" disabled>Add Mother</button>
	              			<button class="nodeEditingButton" id="treeUIdeleteNodes" type="button" disabled style="margin-right: 50px">Delete</button>
	              			<button class="nodeEditingButton" id="treeUIclearSelection" type="button" disabled>Clear Selection</button>
	              		</div>

	              		<br/>
	                	<div id="treeTableContainer"></div>
	                	<i><small>
			            	<p>To add a node, select one or more adjacent sisters and click "Add Mother." To remove nodes, select them and click "Delete." </p>
			            	<p>All labels are editable. The small labels with grey backgrounds represent node categories, and must be "cp", "xp", or "x0" for a node to be visible to the syntax-prosody mapping constraints. Use "clitic" as the category for a node that should be treated as prosodically dependent and not receive a corresponding &omega;. The larger labels with white backgrounds represent node ids, and can be any unique alphanumeric string.</p>
			            </small></i>
	                	<button id="htmlToJsonTreeButton" type="button">Done! Convert tree to code</button>
	            	</div>
	            	<hr/>
					<div style="display:none"><button id="danishJsonTreesButton" type="button">Danish Trees: generate s-tree code</button></div>

					<p><small><b>For manual tree entry:</b> Select a tree from your JavaScript tree file (pre-made trees are in the directory <i>main/trees</i>, and end with .js). Paste in the contents of JS file of your input syntactic tree (from the opening brace to the closing brace, removing any comments and excluding the final semi-colon). Note that if you're only using Markedness constraints, you can just keep the default value of an empty tree (like so: {}) as the syntactic input.</small></p>
					<textarea class="stree-textarea" name="sTree" rows="15">{}</textarea>
	            </div>

				<hr style="margin-top: 20px">
				<h2>Gen options</h2>
				Generate only prosodic trees that obey...<br/>
				<table class="spaceytable"><tbody>
					<tr>
						<td><input type="checkbox" name="genOptions" value="obeysNonrecursivity">Non-recursivity (all levels)</td>
						<td><input type="checkbox" name="genOptions" value="obeysHeadedness">Headedness (all levels)</td>
						<td><input type="checkbox" name="genOptions" value="requirePhiStem">Require &phiv; Stem</td>
						<td><input type="checkbox" name="genOptions" id="exhaustivityBox" value="obeysExhaustivity">Exhaustivity</td>
					</tr>
					<tr id="exhaustivityDetailRow" style="display: none">
						<td><div id="exhaustivityLabelContainer">Enforce Exhaustivity at...</div></td>
						<td><div id="exhaustivityCatContainer">
							<input type="checkbox" name="exhaustivityCats" value="i" checked="checked">&iota;&nbsp;&nbsp;
							<input type="checkbox" name="exhaustivityCats" value="phi" checked="checked">&phiv;&nbsp;&nbsp;
							<input type="checkbox" name="exhaustivityCats" value="w" checked="checked">&omega;
						</div></td>
					</tr>
				</tbody></table>
				<i>Other Gen options:</i><br/>
				<table class="spaceytable"><tbody><tr>
					<td><input type="checkbox" name="genOptions" value="addTones">Include tones</td>
				</tr></tbody></table>
				<small>Checking a box will tell Gen not to produce certain trees, or to annotate the trees. N.B. Gen currently only creates recursion at the &phiv; level.</small><br/>
				<hr/>

				<h2>Optional: Input string(s) for Gen (to create output candidate prosodic trees)</h2>
				<p><i>Leave blank to get from syntatic tree(s)</i></p>
				<p>Type the words that you want to be included in the output prosodic trees, separating them with spaces. Suffix a word with "-clitic" to map it to a syllable instead of &omega; in all prosodic trees.</p>
				<p><b>N.B.</b> Input strings longer than 6 words may be very slow, and risk freezing your system.</p>

				<p>String of terminals: <input type="text" name="inputToGen"></p>
				<!--
				<p>Input 2: <input type="text" name="inputToGen"></p>
				<p>Input 3: <input type="text" name="inputToGen"></p>

				-->
				<div align="center"><button class="orange-button submit-button" type="submit">Submit</button>
				<div align="left">
				<ul>
					<li>Clicking "submit" will initiate a download of a tab-separated version of the resulting tableau</li>
					<li>The tab-separated version of the tableau will also appear in a text-area, from which it can be copy-pasted. (Use Control-A to select it if it's not already selected.) </li>
					<li>An html version of the tableau will also display below.</li>
				</ul>
				</div>
				<h2>Scroll down to see your results!</h2></div>

			</form>

			<pre id="results-container"></pre>

		</div>
	</div>

	</body>
</html>
