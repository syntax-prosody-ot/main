<html>
<head>
	<title>Nick's File (1.17.2018)</title>

	<link rel="stylesheet" type="text/css" href="../spot.css">

	<!-- to keep spot.js in sync with the codebase make sure to run jsbuild.sh after making any changes to javascript files in the main directory or in the constraints sub-directory
	(open a terminal, cd into the main directory, type ./jsbuild.sh and hit enter) -->
	<script src="../build/spot.js"></script>
	
</head>

<body style="padding-left: 5%; padding-right: 5%; padding-top: 20px">
	<h2>Nick's File (1.17.2018)</h2>
	<pre id="results-container"></pre>

	<!--  Load the tree files that you need  -->
	<script src="../trees/japaneseAccent_sTrees.js"></script>
	
	<script>
	//Now we're in the JavaScript section
		
		var a2n = {
    "id": "NP2",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "NP1",
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "id": "n",
                    "cat": "x0"
                }
            ]
        }
    ]
	};

var a2n_CS = GEN(a2n, 'a a n', {obeysExhaustivity:true});

	var a3n = {
    "id": "NP3",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "NP2",
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "cat": "xp",
                    "id": "NP1",
                    "children": [
                        {
                            "id": "a_2",
                            "cat": "x0"
                        },
                        {
                            "id": "n",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
};
		
	function nonRec2(s, parent, cat){
	
	//Base case: if parent is a terminal, return 0 violations.
	if (!parent.children){
		return 0;
	}
	
	//Recursive case: if parent is non-terminal, find out how many violations are in each of the subtrees rooted in its children
	var vcount = 0;
	var child;
	
	for (var i=0; i < parent.children.length; i++){
		child = parent.children[i];
		if (parent.cat===cat && child.cat===cat){
			vcount++;
			break;
		}		
		vcount+=nonRec2(s, child, cat);
	}
	return vcount;
	};	
		
	function lexHelper(sParent, pTree, sCat)
	{
	if(sParent.cat === sCat)
		logreport.debug("\tSeeking match for "+sParent.id + " in tree rooted in "+pTree.id);
	var vcount = 0;
	
	if((sParent.cat === sCat) && !hasMatch(sParent, pTree) && pTree.lex){
		vcount++;
		logreport.debug("\tVIOLATION: "+sParent.id+" has no match!");
	} 
		
	if(sParent.children){	
		for(var i = 0; i < sParent.children.length; i++)
		{
			var sChild = sParent.children[i];
			vcount += lexHelper(sChild, pTree, sCat);
		}
	}
	
	return vcount;
	};
	
	function matchLexPS(sTree, pParent, pCat)
	{
		return lexHelper(pParent, sTree, pCat);
	};
		
	var bpsTree1 = {
    "id": "xp2",
    "cat": "cp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "xp1",
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "id": "n",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var bpsTree1_CS = GEN(bpsTree1, 'a a n', {obeysExhaustivity:true});
	
	var bpsTree2 = {
    "id": "xp3",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "xp2",
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "cat": "xp",
                    "id": "xp1",
                    "children": [
                        {
                            "id": "a_2",
                            "cat": "x0"
                        },
                        {
                            "id": "n",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};
	var bpsTree2_CS = GEN(bpsTree2, 'a a a n', {obeysExhaustivity:true});
	
	var mTree3 = {
    "id": "VP1",
    "cat": "xp",
	"lex":true,
    "children": [
        {
            "id": "v",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "func",
            "children": [
                {
                    "cat": "xp",
                    "id": "NP",
					"lex":true,
                    "children": [
                        {
                            "id": "n",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "NP1",
					"lex":true,
                    "children": [
                        {
                            "id": "n_1",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};
	var mTree3_CS = GEN(mTree3, 'v n n', {obeysExhaustivity:true});

	
	var mTree1 = {
    "id": "xp3",
    "cat": "xp",
	"lex":true,
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "xp2",
			"lex":true,
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "cat": "xp",
                    "id": "xp1",
					"lex":true,
                    "children": [
                        {
                            "id": "n",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};
	var mTree1_CS = GEN(mTree1, 'a a n', {obeysExhaustivity:true});
	
	var mTree2 = {
    "id": "xp4",
    "cat": "xp",
	"lex":true,
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "xp3",
			"lex":true,
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "cat": "xp",
                    "id": "xp2",
					"lex":true,
                    "children": [
                        {
                            "id": "a_2",
                            "cat": "x0"
                        },
                        {
                            "cat": "xp",
                            "id": "xp1",
							"lex":true,
                            "children": [
                                {
                                    "id": "n",
                                    "cat": "x0"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
	};
	var mTree2_CS = GEN(mTree2, 'a a a n', {obeysExhaustivity:true});
	
	function noPostAccW(s, pParent, c){
			var vCount = 0;
			if(pParent.children && pParent.children.length)
			{
				for(var i=0; i < pParent.children.length; i++){
					var child = pParent.children[i];
					if((i<pParent.children.length-1) && hasAccFeature(child))
					{
						var sister = pParent.children[i+1];
						if(sister.cat == "w")
						{
							vCount++;
						}
					}
					vCount += noPostAccW(s, child, c);
				}
			}
			return vCount;
		};
	
	function hasAccFeature(pTree)
	{
			var a = false;
			var leaves = getLeaves(pTree);
			if(!pTree.children)
			{
				if(pTree.accent == "a")
				{
					var a = true;
				};
			};
			for(var i = 0; i < leaves.length; i++)
			{
				var leaf = leaves[i];
				//I'm being lazy and assuming accent is already specified! Should change this later.
				if(leaf.accent == "a")
				{
					var a = true;
					break;
				};
			};
			return a;
		};
		
	function myNoLapse(s, pParent, c){
			var vCount = 0;
			if(pParent.children && pParent.children.length)
			{
				for(var i=0; i < pParent.children.length; i++){
					var child = pParent.children[i];
					if((i<pParent.children.length-1))
					{
						var sister = pParent.children[i+1];
						if(hasAccFeature(child) && (sister.cat == "w") && (sister.accent == "u"))
						{
							vCount++;
						}
					}
					vCount += myNoLapse(s, child, c);
				}
			}
			return vCount;
		};
		
	/*function prosNonMin(pTree)
	{
		var answer = false;
		if(pTree.children.length)
		{
			for(var i = 0; i < pTree.children.length; i++)
			{
				var child = pTree.children[i];
				if(child.cat == pTree.cat)
				{
					var answer = true;
					break;
				};
			};
		};
		return answer;
	};
	
	function unequalMinimality(p1,p2)
	{
		var um = false;
		if((prosNonMin(p1) && !prosNonMin(p2)) || (!prosNonMin(p1) && prosNonMin(p2)))
		{
			var um = true;
		};
		return um;
	};*/
	
	//I'm being lazy: this will only work properly
	//if the only CP node in the tree is the ROOT node!
	//It will also work if the tree is just rooted in XP.
	function matchXPmax(sParent, pTree, sCat)
	{
		var vcount = 0;
		if((sParent.cat === 'xp') && !hasMatch(sParent, pTree)){
			vcount++;
			logreport.debug("\tVIOLATION: "+sParent.id+" has no match!");
		}
		if(((sParent.cat === 'cp') || (sParent.cat === 'clause')) && sParent.children && sParent.children.length)
		{
			for(var i = 0; i  < sParent.children.length; i++)
			{
				var child = sParent.children[i];
				if((child.cat === 'xp') && !hasMatch(child, pTree))
				{
					vcount++;
				};
			};
		};
		return vcount;
	};
	
	function equalSistersAdj_2(s, pparent, c){
		var vCount = 0;
		if(pparent.children && pparent.children.length)
		//pTree is non-terminal
		{
			for(var i=0; i < pparent.children.length; i++){
				var child = pparent.children[i];
				if(i<pparent.children.length-1)
				{
					var sister = pparent.children[i+1];
					if(child.cat != sister.cat)
					{
						if(hasPhiChild(child) && !hasPhiChild(sister))
						{
							vCount++;
						};
						if(!hasPhiChild(child) && hasPhiChild(sister))
						{
							vCount++;
						};
					}
				}
				vCount += equalSistersAdj_2(s, child, c);
			}
		}
		return vCount;
	};
		
	function hasPhiChild(p)
	{
		var answer = false;
		if(p.children && p.children.length)
		{
			for(var i = 0; i < p.children.length; i++)
			{
				var child = p.children[i];
				if(child.cat == "phi")
				{
					var answer = true;
					break;
				};
			};
		};
		return answer;
	};	
		
	function noLoverR(s, pParent, c){
		var vCount = 0;
		//i=0, phi=1, w=2
		//so "<" means "outranks on the hierarchy"
		var prosHi = ["i", "phi", "w"];
		if(pParent.children && pParent.children.length)
		//pTree is non-terminal
		{
			for(var i=0; i < pParent.children.length; i++){
				var child = pParent.children[i];
				if(i<pParent.children.length-1)
				{
					var sister = pParent.children[i+1];
					if(prosHi.indexOf(child) < prosHi.indexOf(sister))
					{
						vCount++;
					};
				}
				vCount += noLoverR(s, child, c);
			}
		}
		return vCount;
	};
	
	function noRoverL(s, pParent, c){
		var vCount = 0;
		//i=0, phi=1, w=2
		//so "<" means "outranks on the hierarchy"
		var prosHi = ["i", "phi", "w"];
		if(pParent.children && pParent.children.length)
		//pTree is non-terminal
		{
			for(var i=0; i < pParent.children.length; i++){
				var child = pParent.children[i];
				if(i<pParent.children.length-1)
				{
					var sister = pParent.children[i+1];
					if(prosHi.indexOf(child) > prosHi.indexOf(sister))
					{
						vCount++;
					};
				}
				vCount += noLoverR(s, child, c);
			}
		}
		return vCount;
	};

	function matchPS_nmin(sTree, pParent, pCat)
	{
		return matchSP_nmin(pParent, sTree, pCat);
	};
	
	function matchSP_nmin(sParent, pTree, sCat)
	{
		if(sParent.cat === sCat)
			logreport.debug("\tSeeking match for "+sParent.id + " in tree rooted in "+pTree.id);
		var vcount = 0;
	
		if((sParent.cat === sCat) && !hasMatch(sParent, pTree)){
			if(sParent.children.length >= 2)
			{
				vcount++;
				logreport.debug("\tVIOLATION: "+sParent.id+" has no match!");
			}
		}
		
		if(sParent.children){	
			for(var i = 0; i < sParent.children.length; i++)
			{
				var sChild = sParent.children[i];
				vcount += matchSP_nmin(sChild, pTree, sCat);
			}
		}
		return vcount;
	};
	
	function matchLexSP(sParent, pTree, sCat)
	{
		if((sParent.cat === sCat) && sParent.lex)
			logreport.debug("\tSeeking match for "+sParent.id + " in tree rooted in "+pTree.id);
		var vcount = 0;
	
		if((sParent.cat === sCat) && !hasMatch(sParent, pTree) && sParent.lex){
			vcount++;
			logreport.debug("\tVIOLATION: "+sParent.id+" has no match!");
		} 
		
		if(sParent.children){	
			for(var i = 0; i < sParent.children.length; i++)
			{
				var sChild = sParent.children[i];
				vcount += matchLexSP(sChild, pTree, sCat);
			}
		}
	
		return vcount;
	};
	
	function hasLexMatch(sNode, pTree)
	{
		var sLeaves = getLeaves(sNode);
		if(catsMatch(sNode.cat, pTree.cat) && sameIds(getLeaves(pTree), sLeaves) && pTree.lex)
		// the current prosodic node is the match, both for category and for terminals
		{
			logreport.debug("\tMatch found: "+pTree.id);
			return true;
		}
	
		// If the current prosodic node is NOT the match:
	
		else if(!pTree.children || pTree.children.length===0)
		// current node is terminal
			return false;	

		else
		//the current prosodic node is non-terminal (has children)
		{
			for(var i = 0; i < pTree.children.length; i++)
			//check each child to see if the match exists in the subtree rooted in that child
			{
				var child = pTree.children[i];
				if(hasLexMatch(sNode, child))
					return true;
			}
			return false;
		}
	
	}
	
	
	/*Let's list our constraints: get the names out of the constraint definition js files
	Category name should be separated from constraint name by -
	*/
	var constraintSet = ['matchXPmax-xp', 'matchSP-xp', 'matchPS_nmin-phi', 'matchPS-phi', 'binMinBranches-phi', 'binMaxBranches-phi', 'binMax2Words-phi', 'equalSistersAdj-phi', 'strongStart_Elfner-w', 'noPostAccW', 'accentAsHead-phi', 'matchSP_nmin-xp', 'equalSistersAdj_2-phi', 'noLapseL', 'nonRec1-phi'];
	
	
var lsCon = ['matchLexSP-xp', 'matchSP-xp', 'matchPS-phi', 'binMinBranches-phi', 'binMaxBranches-phi', 'binMax2Words-phi', 'equalSistersAdj-phi', 'strongStart_Elfner-w'];
	
	var nioi = {
    "id": "NP",
    "cat": "cp",
    "children": [
        {
            "cat": "xp",
            "id": "NP",
            "children": [
                {
                    "cat": "xp",
                    "id": "RC",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "DP",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "cat": "xp",
                            "id": "VP",
                            "children": [
                                {
                                    "id": "a_1",
                                    "cat": "x0"
                                }
                            ]
                        }
                    ]
                },
                {
                    "id": "a_2",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_3",
            "cat": "x0"
        }
    ]
	};
	
	var nioi_CS = GEN(nioi, 'a a_1 a_2 a_3', {obeysExhaustivity:true});
	
	var uwasa = {
    "id": "NP",
    "cat": "cp",
    "children": [
        {
            "cat": "xp",
            "id": "NP",
            "children": [
                {
                    "cat": "xp",
                    "id": "RC",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "DP",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "cat": "xp",
                            "id": "VP",
                            "children": [
                                {
                                    "id": "u_1",
                                    "cat": "x0",
									"accent":"u"
                                }
                            ]
                        }
                    ]
                },
                {
                    "id": "u_2",
                    "cat": "x0",
					"accent":"u"
                }
            ]
        },
        {
            "id": "u_3",
            "cat": "x0",
			"accent":"u"
        }
    ]
	};
	
	var uwasa_CS = GEN(uwasa, 'u u_1 u_2 u_3', {obeysExhaustivity:true});
	
	
	var vnnEV = {
    "id": "VP1",
    "cat": "xp",
	"lex":true,
    "children": [
        {
            "id": "v",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "VP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "NP",
					"lex":true,
                    "children": [
                        {
                            "id": "n",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "NP1",
					"lex":true,
                    "children": [
                        {
                            "id": "n_1",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};

	var vnnEV_CS = GEN(vnnEV, 'v n n', {obeysExhaustivity:true});

	
	var vnanCT = {
    "id": "VP2",
    "cat": "xp",
    "children": [
        {
            "id": "v",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "VP1",
            "children": [
                {
                    "cat": "xp",
                    "id": "NP1",
                    "children": [
                        {
                            "id": "n",
                            "cat": "x0"
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "NP2",
                    "children": [
                        {
                            "id": "n_1",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};

	var vnanCT_CS = GEN(vnanCT, 'v n a n', {obeysExhaustivity:true});
	
	var vnnaCT = {
    "id": "VP2",
    "cat": "xp",
    "children": [
        {
            "id": "v",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "VP1",
            "children": [
                {
                    "cat": "xp",
                    "id": "NP1",
                    "children": [
                        {
                            "id": "n",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "NP2",
                    "children": [
                        {
                            "id": "n_1",
                            "cat": "x0"
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};
	
	var vnnaCT_CS = GEN(vnnaCT, 'v n n a', {obeysExhaustivity:true});
	
	var vnanaCT = {
    "id": "VP2",
    "cat": "xp",
    "children": [
        {
            "id": "v",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "VP1",
            "children": [
                {
                    "cat": "xp",
                    "id": "NP1",
                    "children": [
                        {
                            "id": "n",
                            "cat": "x0"
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "NP2",
                    "children": [
                        {
                            "id": "n_1",
                            "cat": "x0"
                        },
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        }
    ]
	};
	
	var vnanaCT_CS = GEN(vnanaCT, 'v n a n a', {obeysExhaustivity:true});
	
//TWO WORDS

//replaced
	var uuBin = {
    "id": "XP2",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP1",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_1",
            "cat": "x0"
        }
    ]
};
	var uuBin_CS = GEN(uuBin, 'u u', {obeysExhaustivity:true});
	
	//replaced
	var uaBin = {
    "id": "XP2",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP1",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a",
            "cat": "x0"
        }
    ]
};

	var uaBin_CS = GEN(uaBin, 'u a', {obeysExhaustivity:true});

//replaced
	var aaBin = {
    "id": "XP2",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP1",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_1",
            "cat": "x0"
        }
    ]
};

	var aaBin_CS = GEN(aaBin, 'a a', {obeysExhaustivity:true});
	
	//replaced
	var auBin = {
    "id": "XP2",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP1",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u",
            "cat": "x0"
        }
    ]
};

	var auBin_CS = GEN(auBin, 'a u', {obeysExhaustivity:true});

	//LEFT-BRANCHING

	//replaced
	var uuuLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_2",
            "cat": "x0"
        }
    ]
};
	var uuuLeft_CS = GEN(uuuLeft, 'u u u', {obeysExhaustivity:true});
	
	//replaced
	var uaaLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_1",
            "cat": "x0"
        }
    ]
};

	var uaaLeft_CS = GEN(uaaLeft, 'u a a', {obeysExhaustivity:true});
	
	var uauLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_1",
            "cat": "x0"
        }
    ]
};

	var uauLeft_CS = GEN(uauLeft, 'u a u', {obeysExhaustivity:true});
	
	//replaced
	var uuaLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a",
            "cat": "x0"
        }
    ]
};

	var uuaLeft_CS = GEN(uuaLeft, 'u u a', {obeysExhaustivity:true});
	
	//replaced
	var aaaLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_2",
            "cat": "x0"
        }
    ]
};

	var aaaLeft_CS = GEN(aaaLeft, 'a a a', {obeysExhaustivity:true});
	
	//replaced
	var aauLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u",
            "cat": "x0"
        }
    ]
};

	var aauLeft_CS = GEN(aauLeft, 'a a u', {obeysExhaustivity:true});
	
	//replaced
	var auaLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_1",
            "cat": "x0"
        }
    ]
};

	var auaLeft_CS = GEN(auaLeft, 'a u a', {obeysExhaustivity:true});
	
	var auuLeft = {
    "id": "XP3",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_1",
            "cat": "x0"
        }
    ]
};

	var auuLeft_CS = GEN(auuLeft, 'a u u', {obeysExhaustivity:true});

	//RIGHT-BRANCHING
	
	/*On February 23, I went through the left-branching trees and brought them into
	full compliance with the syntax from \itom. The same needs to be done to these,
	but I'm not going to do it now, because today I'm interested in checking the EXACT
	system in Ito & Mester 2017, which doesn't have any right-branching trees. This is lucky, because 	the syntax of the right-branching trees is a real dubious point for me.*/

	var uuuRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_2",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var uuuRight_CS = GEN(uuuRight, 'u u u', {obeysExhaustivity:true});
	
	var uaaRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var uaaRight_CS = GEN(uaaRight, 'u a a', {obeysExhaustivity:true});
	
	var uauRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var uauRight_CS = GEN(uauRight, 'u a u', {obeysExhaustivity:true});
	
	var uuaRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var uuaRight_CS = GEN(uuaRight, 'u u a', {obeysExhaustivity:true});
	
	var aaaRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_2",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var aaaRight_CS = GEN(aaaRight, 'a a a', {obeysExhaustivity:true});
	
	var aauRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var aauRight_CS = GEN(aauRight, 'a a u', {obeysExhaustivity:true});
	
	var auaRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var auaRight_CS = GEN(auaRight, 'a u a', {obeysExhaustivity:true});
	
	var auuRight = {
    "id": "xp",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "cat": "xp",
            "id": "XP_5",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP_6",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        }
    ]
	};
	var auuRight_CS = GEN(auuRight, 'a u u', {obeysExhaustivity:true});
		
	//FOUR WORDS
	
	var uuuuFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_2",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_3",
            "cat": "x0"
        }
    ]
	};

var uuuuFour_CS = GEN(uuuuFour, 'u u u u', {obeysExhaustivity:true})

var uuuaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_2",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a",
            "cat": "x0"
        }
    ]
};

var uuuaFour_CS = GEN(uuuaFour, 'u u u a', {obeysExhaustivity:true})

var uuaaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_1",
            "cat": "x0"
        }
    ]
};

var uuaaFour_CS = GEN(uuaaFour, 'u u a a', {obeysExhaustivity:true});

var uuauFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_2",
            "cat": "x0"
        }
    ]
};

var uuauFour_CS = GEN(uuauFour, 'u u a u', {obeysExhaustivity:true});

var uauuFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_2",
            "cat": "x0"
        }
    ]
};

var uauuFour_CS = GEN(uauuFour, 'u a u u', {obeysExhaustivity:true});

var uauaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_1",
            "cat": "x0"
        }
    ]
};

var uauaFour_CS = GEN(uauaFour, 'u a u a', {obeysExhaustivity:true});
		
var uaaaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_2",
            "cat": "x0"
        }
    ]
};

var uaaaFour_CS = GEN(uaaaFour, 'u a a a', {obeysExhaustivity:true});	

var uaauFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "u",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_1",
            "cat": "x0"
        }
    ]
};

var uaauFour_CS = GEN(uaauFour, 'u a a u', {obeysExhaustivity:true});

var aauuFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_1",
            "cat": "x0"
        }
    ]
};

var aauuFour_CS = GEN(aauuFour, 'a a u u', {obeysExhaustivity:true});
		
var aauaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_2",
            "cat": "x0"
        }
    ]
};

var aauaFour_CS = GEN(aauaFour, 'a a u a', {obeysExhaustivity:true});		

var aaaaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_2",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_3",
            "cat": "x0"
        }
    ]
};

var aaaaFour_CS = GEN(aaaaFour, 'a a a a', {obeysExhaustivity:true});

var aaauFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_2",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u",
            "cat": "x0"
        }
    ]
};

var aaauFour_CS = GEN(aaauFour, 'a a a u', {obeysExhaustivity:true});

var auuuFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_2",
            "cat": "x0"
        }
    ]
};

var auuuFour_CS = GEN(auuuFour, 'a u u u', {obeysExhaustivity:true});

var auuaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_1",
            "cat": "x0"
        }
    ]
};

var auuaFour_CS = GEN(auuaFour, 'a u u a', {obeysExhaustivity:true});
		
var auaaFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "a_2",
            "cat": "x0"
        }
    ]
};

var auaaFour_CS = GEN(auaaFour, 'a u a a', {obeysExhaustivity:true});
		
var auauFour = {
    "id": "XP4",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        },
        {
            "id": "u_1",
            "cat": "x0"
        }
    ]
};

var auauFour_CS = GEN(auauFour, 'a u a u', {obeysExhaustivity:true});

var ab_cs = GEN({
    "id": "CP",
    "cat": "cp",
    "children": [
        {
            "cat": "xp",
            "id": "XP1",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                },
                {
                    "id": "b",
                    "cat": "x0"
                }
            ]
        }
    ]
}, 'a b');

var abc_cs = GEN({
    "id": "CP",
    "cat": "cp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP1",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        },
                        {
                            "id": "b",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "c",
                    "cat": "x0"
                }
            ]
        }
    ]
}, 'a b c');
		
var abcd_cs = GEN({
    "id": "CP",
    "cat": "cp",
    "children": [
        {
            "cat": "xp",
            "id": "XP3",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP2",
                    "children": [
                        {
                            "cat": "xp",
                            "id": "XP1",
                            "children": [
                                {
                                    "id": "a",
                                    "cat": "x0"
                                },
                                {
                                    "id": "b",
                                    "cat": "x0"
                                }
                            ]
                        },
                        {
                            "id": "c",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "id": "d",
                    "cat": "x0"
                }
            ]
        }
    ]
}, 'a b c d');		
		

//CT JAPANESE!
function runDemo() {
		//1
		writeTableau(makeTableau(uuBin2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//2
		writeTableau(makeTableau(uaBin2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//3
		writeTableau(makeTableau(aaBin2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//4
		writeTableau(makeTableau(auBin2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//5
		writeTableau(makeTableau(uuuLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//6
		writeTableau(makeTableau(uaaLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//7
		writeTableau(makeTableau(uauLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//8
		writeTableau(makeTableau(uuaLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//9
		writeTableau(makeTableau(aaaLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//10
		writeTableau(makeTableau(aauLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//11
		writeTableau(makeTableau(auaLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//12
		writeTableau(makeTableau(auuLeft2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		
		//13
		writeTableau(makeTableau(uuuRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//14
		writeTableau(makeTableau(uaaRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//15
		writeTableau(makeTableau(uauRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//16
		writeTableau(makeTableau(uuaRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//17
		writeTableau(makeTableau(aaaRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//18
		writeTableau(makeTableau(aauRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//19
		writeTableau(makeTableau(auaRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//20
		writeTableau(makeTableau(auuRight2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//21
		writeTableau(makeTableau(uuuuFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//22
		writeTableau(makeTableau(uuuaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//23
		writeTableau(makeTableau(uuaaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//24
		writeTableau(makeTableau(uuauFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//25
		writeTableau(makeTableau(uauuFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//26
		writeTableau(makeTableau(uauaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//27
		writeTableau(makeTableau(uaaaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//28
		writeTableau(makeTableau(uaauFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//29
		writeTableau(makeTableau(aauuFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//30
		writeTableau(makeTableau(aauaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//31
		writeTableau(makeTableau(aaaaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//32
		writeTableau(makeTableau(aaauFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//33
		writeTableau(makeTableau(auuuFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//34
		writeTableau(makeTableau(auuaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//35
		writeTableau(makeTableau(auaaFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
		//36
		writeTableau(makeTableau(auauFour2_CS, groupCon));
		revealNextSegment();
		lastSegmentId++;
		
	};

//TWO WORDS

var uuBin2 = {
"id": "xp",
"cat": "xp",
"children": [
    {
        "id": "u",
        "cat": "x0"
    },
    {
        "id": "u_1",
        "cat": "x0"
    }
]
};

var uuBin2_CS = GEN(uuBin2, 'u u', {obeysExhaustivity:true});

var uaBin2 = {
"id": "xp",
"cat": "xp",
"children": [
    {
        "id": "u",
        "cat": "x0"
    },
    {
        "id": "a",
        "cat": "x0"
    }
]
};

var uaBin2_CS = GEN(uaBin2, 'u a', {obeysExhaustivity:true});

var aaBin2 = {
"id": "xp",
"cat": "xp",
"children": [
    {
        "id": "a",
        "cat": "x0"
    },
    {
        "id": "a_1",
        "cat": "x0"
    }
]
};

var aaBin2_CS = GEN(aaBin2, 'a a', {obeysExhaustivity:true});

var auBin2 = {
"id": "xp",
"cat": "xp",
"children": [
    {
        "id": "a",
        "cat": "x0"
    },
    {
        "id": "u",
        "cat": "x0"
    }
]
};

var auBin2_CS = GEN(auBin2, 'a u', {obeysExhaustivity:true});

//LEFT-BRANCHING

var uuuLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "u",
                "cat": "x0"
            },
            {
                "id": "u_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_2",
        "cat": "x0"
    }
]
};

var uuuLeft2_CS = GEN(uuuLeft2, 'u u u', {obeysExhaustivity:true});
	
var uaaLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "u",
                "cat": "x0"
            },
            {
                "id": "a",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_1",
        "cat": "x0"
    }
]
};

var uaaLeft2_CS = GEN(uaaLeft2, 'u a a', {obeysExhaustivity:true});

var uauLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "u",
                "cat": "x0"
            },
            {
                "id": "a",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_1",
        "cat": "x0"
    }
]
};

var uauLeft2_CS = GEN(uauLeft2, 'u a u', {obeysExhaustivity:true});

var uuaLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "u",
                "cat": "x0"
            },
            {
                "id": "u_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a",
        "cat": "x0"
    }
]
};

var uuaLeft2_CS = GEN(uuaLeft2, 'u u a', {obeysExhaustivity:true});

var aaaLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "a",
                "cat": "x0"
            },
            {
                "id": "a_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_2",
        "cat": "x0"
    }
]
};

var aaaLeft2_CS = GEN(aaaLeft2, 'a a a', {obeysExhaustivity:true});

var aauLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "a",
                "cat": "x0"
            },
            {
                "id": "a_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u",
        "cat": "x0"
    }
]
};

var aauLeft2_CS = GEN(aauLeft2, 'a a u', {obeysExhaustivity:true});

var auaLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "a",
                "cat": "x0"
            },
            {
                "id": "u",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_1",
        "cat": "x0"
    }
]
};

var auaLeft2_CS = GEN(auaLeft2, 'a u a', {obeysExhaustivity:true});

var auuLeft2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "id": "a",
                "cat": "x0"
            },
            {
                "id": "u",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_1",
        "cat": "x0"
    }
]
};

var auuLeft2_CS = GEN(auuLeft2, 'a u u', {obeysExhaustivity:true});


//RIGHT-BRANCHING

var uuuRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "u",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u_1",
                    "cat": "x0"
                },
                {
                    "id": "u_2",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var uuuRight2_CS = GEN(uuuRight2, 'u u u', {obeysExhaustivity:true});

var uaaRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "u",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var uaaRight2_CS = GEN(uaaRight2, 'u a a', {obeysExhaustivity:true});

var uauRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "u",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a",
                    "cat": "x0"
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var uauRight2_CS = GEN(uauRight2, 'u a u', {obeysExhaustivity:true});

var uuaRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "u",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u_1",
                    "cat": "x0"
                },
                {
                    "id": "a",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var uuaRight2_CS = GEN(uuaRight2, 'u u a', {obeysExhaustivity:true});

var aaaRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "id": "a_2",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var aaaRight2_CS = GEN(aaaRight2, 'a a a', {obeysExhaustivity:true});

var aauRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "a_1",
                    "cat": "x0"
                },
                {
                    "id": "u",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var aauRight2_CS = GEN(aauRight2, 'a a u', {obeysExhaustivity:true});

var auaRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                },
                {
                    "id": "a_1",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var auaRight2_CS = GEN(auaRight2, 'a u a', {obeysExhaustivity:true});

var auuRight2 = {
    "id": "xp_5",
    "cat": "xp",
    "children": [
        {
            "id": "a",
            "cat": "x0"
        },
        {
            "cat": "xp",
            "id": "XP_4",
            "children": [
                {
                    "id": "u",
                    "cat": "x0"
                },
                {
                    "id": "u_1",
                    "cat": "x0"
                }
            ]
        }
    ]
};
var auuRight2_CS = GEN(auuRight2, 'a u u', {obeysExhaustivity:true});

//FOUR WORDS

var uuuuFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "u_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u_2",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_3",
        "cat": "x0"
    }
]
};

var uuuuFour2_CS = GEN(uuuuFour2, 'u u u u', {obeysExhaustivity:true})

var uuuaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "u_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u_2",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a",
        "cat": "x0"
    }
]
};

var uuuaFour2_CS = GEN(uuuaFour2, 'u u u a', {obeysExhaustivity:true})

var uuaaFour2 = {
	"id": "xp2",
	"cat": "xp",
	"children": [
		{
    		"cat": "xp",
        	"id": "xp1",
        	"children": [
        		{
            		"cat": "xp",
                	"id": "xp",
                	"children": [
                		{
                    		"id": "u",
                        	"cat": "x0"
                   	 	},
                    	{
                    		"id": "u_1",
                        	"cat": "x0"
                    	}
                	]
            	},
            	{
            		"id": "a",
                	"cat": "x0"
            	}
        	]
    	},
    	{
    		"id": "a_1",
        	"cat": "x0"
    	}
	]
};

var uuaaFour2_CS = GEN(uuaaFour2, 'u u a a', {obeysExhaustivity:true});

var uuauFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "u_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_2",
        "cat": "x0"
    }
]
};

var uuauFour2_CS = GEN(uuauFour2, 'u u a u', {obeysExhaustivity:true});

var uauuFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "a",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_2",
        "cat": "x0"
    }
]
};

var uauuFour2_CS = GEN(uauuFour2, 'u a u u', {obeysExhaustivity:true});

var uauaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "a",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_1",
        "cat": "x0"
    }
]
};

var uauaFour2_CS = GEN(uauaFour2, 'u a u a', {obeysExhaustivity:true});
	
var uaaaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "a",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_2",
        "cat": "x0"
    }
]
};

var uaaaFour2_CS = GEN(uaaaFour2, 'u a a a', {obeysExhaustivity:true});	

var uaauFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "u",
                        "cat": "x0"
                    },
                    {
                        "id": "a",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_1",
        "cat": "x0"
    }
]
};

var uaauFour2_CS = GEN(uaauFour2, 'u a a u', {obeysExhaustivity:true});

var aauuFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "a_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_1",
        "cat": "x0"
    }
]
};

var aauuFour2_CS = GEN(aauuFour2, 'a a u u', {obeysExhaustivity:true});
	
var aauaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "a_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_2",
        "cat": "x0"
    }
]
};

var aauaFour2_CS = GEN(aauaFour2, 'a a u a', {obeysExhaustivity:true});		

var aaaaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "a_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a_2",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_3",
        "cat": "x0"
    }
]
};

var aaaaFour2_CS = GEN(aaaaFour2, 'a a a a', {obeysExhaustivity:true});

var aaauFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "a_1",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a_2",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u",
        "cat": "x0"
    }
]
};

var aaauFour2_CS = GEN(aaauFour2, 'a a a u', {obeysExhaustivity:true});

var auuuFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "u",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_2",
        "cat": "x0"
    }
]
};

var auuuFour2_CS = GEN(auuuFour2, 'a u u u', {obeysExhaustivity:true});

var auuaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "u",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "u_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_2",
        "cat": "x0"
    }
]
};

var auuaFour2_CS = GEN(auuaFour2, 'a u u a', {obeysExhaustivity:true});
	
var auaaFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "u",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "a_2",
        "cat": "x0"
    }
]
};

var auaaFour2_CS = GEN(auaaFour2, 'a u a a', {obeysExhaustivity:true});
	
var auauFour2 = {
"id": "xp2",
"cat": "xp",
"children": [
    {
        "cat": "xp",
        "id": "xp1",
        "children": [
            {
                "cat": "xp",
                "id": "xp",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "u",
                        "cat": "x0"
                    }
                ]
            },
            {
                "id": "a_1",
                "cat": "x0"
            }
        ]
    },
    {
        "id": "u_2",
        "cat": "x0"
    }
]
};

var auauFour2_CS = GEN(auauFour2, 'a u a u', {obeysExhaustivity:true});
	
	var uuuRC = {
    "id": "XP1",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP4",
                    "children": [
                        {
                            "id": "u",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "XP3",
                    "children": [
                        {
                            "id": "u_1",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        },
        {
            "id": "u_2",
            "cat": "x0"
        }
    ]
	};
	
	var uuuRC_CS = GEN(uuuRC, 'u u u', {obeysExhaustivity:true});
	
	var aaaRC = {
    "id": "XP1",
    "cat": "xp",
    "children": [
        {
            "cat": "xp",
            "id": "XP2",
            "children": [
                {
                    "cat": "xp",
                    "id": "XP4",
                    "children": [
                        {
                            "id": "a",
                            "cat": "x0"
                        }
                    ]
                },
                {
                    "cat": "xp",
                    "id": "XP3",
                    "children": [
                        {
                            "id": "a_1",
                            "cat": "x0"
                        }
                    ]
                }
            ]
        },
        {
            "id": "a_2",
            "cat": "x0"
        }
    ]
	};
	
	var aaaRC_CS = GEN(aaaRC, 'a a a', {obeysExhaustivity:true});
	

	var groupCon = ['noPostAccW', 'accentAsHead-phi', "group", "globalGroup", "mutualSplit", "splitApart", 'equalSistersAdj-phi', 'binMinBranches-phi', 'binMaxBranches-phi', 'binMax2Words-phi'];
	
	//function runDemo() {
			//writeTableau(makeTableau(mTree3_CS, lsCon));
			//revealNextSegment();
			//lastSegmentId++;
		
			//writeTableau(makeTableau(mTree1_CS, lsCon));
			//revealNextSegment();
			//lastSegmentId++;
		
			//writeTableau(makeTableau(mTree2_CS, lsCon));
			//revealNextSegment();
			//lastSegmentId++;
		
			/*
			writeTableau(makeTableau(aaBin2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
		
			writeTableau(makeTableau(uuBin_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(aaBin_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uuuLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
		
			writeTableau(makeTableau(aaaLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
		
			writeTableau(makeTableau(uuuLeft_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
		
			writeTableau(makeTableau(uuuRC_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(aaaRC_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
		
			writeTableau(makeTableau(aaaLeft_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
		
			writeTableau(makeTableau(uwasa_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;	
		
			writeTableau(makeTableau(nioi_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			//writeTableau(makeTableau(vnnEV_CS, lsCon));
			//revealNextSegment();
			//lastSegmentId++;
			*/
		
			/*
			writeTableau(makeTableau(vnnEV_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(vnanCT_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(vnnaCT_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(vnanaCT_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			*/
			
			/*writeTableau(makeTableau(uaBin2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;*/
			
			//writeTableau(makeTableau(auBin2_CS, groupCon));
			//revealNextSegment();
			//lastSegmentId++;

			
			/*
			writeTableau(makeTableau(uaaLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uauLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uuaLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			*/	
			
			/*
			writeTableau(makeTableau(aauLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(auaLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(auuLeft2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			//Four words
			*/
			//writeTableau(makeTableau(uuuuFour_CS, groupCon));
			//revealNextSegment();
			//lastSegmentId++;
			
			/*
			writeTableau(makeTableau(uuuaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uuaaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uuauFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uauuFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uauaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uaaaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(uaauFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(aauuFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			writeTableau(makeTableau(aauaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			*/
			
			//writeTableau(makeTableau(aaaaFour_CS, groupCon));
			//revealNextSegment();
			//lastSegmentId++;
			
			/*
			writeTableau(makeTableau(aaauFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			
			writeTableau(makeTableau(auuuFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			
			writeTableau(makeTableau(auuaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			
			writeTableau(makeTableau(auaaFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			
			
			writeTableau(makeTableau(auauFour2_CS, groupCon));
			revealNextSegment();
			lastSegmentId++;
			*/
			//};
	
	
	
	//COMMAND THEORY
	function isInArray(myArray, x)
	{
		var answer = false;
		for(var i = 0; i < myArray.length; i++)
		{
			if(x == myArray[i])
			{
				answer = true;
			}
		}
		return answer;
	};

	function getNodes(myTree)
	{
		var nodes = [];
		nodes.push(myTree);
		if(myTree.children && myTree.children.length)
		{
			for(var x = 0; x < myTree.children.length; x++)
			{
				var xNodes = getNodes(myTree.children[x]);
				for(var y = 0; y < xNodes.length; y++)
				{
					nodes.push(xNodes[y]);
				}
			}
		}
		return nodes;
	};

	// x immediately dominates y
	function imDom(x,y)
	{
		var check = false;
		if(x.children && x.children.length)
		{
			for(var i = 0; i < x.children.length; i++)
			{
				var currentKid = x.children[i];
				if(currentKid == y)
				{
					var check = true;
				}
			}
		};
		return check;
	};

	// Intended to replace imDom
	function isParentOf(x,y){
		return (x.children || []).indexOf(y) >= 0;
	}

	//Returns parent of goal-node in within tree, if one exists. Else returns false.
	function getParent(myTree,goal)
	{
		var par = false;
		if(imDom(myTree, goal) == true)
		{
			par = myTree;
		}
		else
		{
			if(myTree.children && myTree.children.length)
			{
				for(var j = 0; j < myTree.children.length; j++)
				{
					var nextNode = myTree.children[j];
					if(getParent(nextNode, goal) != "")
					{
						par = getParent(nextNode, goal);
					}
				}
			}
		}
		return par;
	};

	//Returns the non-silent terminals c-commanded by node x within tree.
	function commands(myTree,x)
	{
		var domain = [];
		var xParent = getParent(myTree,x);
		if(hasParent(myTree,x) && (xParent.children.length > 1))
		{
			for(var i = 0; i < xParent.children.length; i++)
			{
				var current = xParent.children[i];
				if(current != x)
				{
					var currentNodes = getNodes(current);
					for(var j = 0; j < currentNodes.length; j++)
					{
						var z = currentNodes[j];
						if(!z.silent && !z.children)
						{
							domain.push(z);
						}
					}
				}
			}
		};
		return domain;
	};

	function hasParent(myTree, x)
	{
		if(getParent(myTree, x) == "false")
		{
			return false;
		}
		else
		{
			return true;
		}
	};

	function getPhis(pTree)
	{
		var phiArray = [];
		var nodes = getNodes(pTree);
		for(var i = 0; i < nodes.length; i++)
		{
			var current = nodes[i];
			if(current.cat == "phi")
			{
				phiArray.push(current);
			}
		};
		return phiArray;
	};

	function phiMates(ptree,x,y)
	{
		var answer = false;
		var phis = getPhis(ptree);
		for(var i = 0; i < phis.length; i++)
		{
			var currentPhi = phis[i];
			var nodes = currentPhi.children;
			var hasX = false;
			var hasY = false;
			for(var j = 0; j < nodes.length; j++)
			{
				var k = nodes[j];
				if(k.id == x.id)
				{
					var hasX = true;
				}
				if(k.id == y.id)
				{
					var hasY = true;
				}
				if(hasX && hasY)
				{
					break;
				}
			};
			if(hasX && hasY)
			{
				var answer = true;
				break;
			}
		};
		return answer;
	};

	function sharePhi(ptree,x,y)
	{
		var answer = false;
		var phis = getPhis(ptree);
		for(var i = 0; i < phis.length; i++)
		{
			var currentPhi = phis[i];
			var nodes = getNodes(currentPhi);
			var hasX = false;
			var hasY = false;
			for(var j = 0; j < nodes.length; j++)
			{
				var k = nodes[j];
				if(k.id == x.id)
				{
					var hasX = true;
				}
				if(k.id == y.id)
				{
					var hasY = true;
				}
				if(hasX && hasY)
				{
					break;
				}
			};
			if(hasX && hasY)
			{
				var answer = true;
				break;
			}
		};
		return answer;
	};

	function group(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var currentLeaf = sLeaves[i];
			var comSet = commands(sTree,currentLeaf);
			for(var j = 0; j < comSet.length; j++)
			{
				var currentCommandee = comSet[j];
				if(!sharePhi(pTree,currentLeaf,currentCommandee))
				{
					vcount++;
				}
			}
		}
		return vcount;
	};

	function groupMin(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var currentLeaf = sLeaves[i];
			var comSet = commands(sTree,currentLeaf);
			for(var j = 0; j < comSet.length; j++)
			{
				var currentCommandee = comSet[j];
				if(!phiMates(pTree,currentLeaf,currentCommandee))
				{
					vcount++;
				}
			}
		}
		return vcount;
	};

	//Assumes x is a non-silent leaf. Returns next non-silent leaf.
	function nextLeaf(tree,x)
	{
		var next = [];
		var leaves = getLeaves(tree);
		for(var i = 0; i < leaves.length-1; i++)
		{
			if(leaves[i] == x)
			{
				var j = leaves[i+1];
				next.push(j);
				break;
			}
		}
		return next;
	};

	//NB: ASSUMES x AND y ARE TERMINALS! Will return false if one of the nodes is non-terminal, even if it actually c-commands the other.
	function mutualNonCommand(tree,x,y)
	{
		var cx = commands(tree,x);
		var cy = commands(tree,y);
		if(!isInArray(cx,y) && !isInArray(cy,x))
		{
			return true;
		}
		else
		{
			return false;
		};
	};
	
	//NB: ASSUMES x AND y ARE TERMINALS! Will return false if one of the nodes is non-terminal, even if it actually c-commands the other.
	function siblings(tree,x,y)
	{
		var cx = commands(tree,x);
		var cy = commands(tree,y);
		if(isInArray(cx,y) && isInArray(cy,x))
		{
			return true;
		}
		else
		{
			return false;
		};
	};

	function splitNMC(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var current = sLeaves[i];
			if(nextLeaf(sTree,current).length)
			{
				var next = nextLeaf(sTree,current)[0];
				if(mutualNonCommand(sTree,current,next) && sharePhi(pTree,current,next))
				{
					vcount++;
				}
			}
		}
		return vcount;
	};

	function splitNMCmin(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var current = sLeaves[i];
			if(nextLeaf(sTree,current).length)
			{
				var next = nextLeaf(sTree,current)[0];
				if(mutualNonCommand(sTree,current,next) && phiMates(pTree,current,next))
				{
					vcount++;
				}
			}
		}
		return vcount;
	};

	function adjacent(tree,x,y)
	{
		var leaves = getLeaves(tree);
		var xindex = leaves.indexOf(x);
		var yindex = leaves.indexOf(y);
		if(Math.abs(xindex-yindex) === 1)
		{
			return true;
		}
		else
		{
			return false;
		};
	};

	function localGroup(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var currentLeaf = sLeaves[i];
			var comSet = commands(sTree,currentLeaf);
			for(var j = 0; j < comSet.length; j++)
			{
				var currentCommandee = comSet[j];
				
				//Are they adjacent?
				if(adjacent(sTree,currentLeaf,currentCommandee))
				{
					var phiSet = getPhis(pTree);
					for(var k = 0; k < phiSet.length; k++)
					{
						if(pCorDom(phiSet[k],currentLeaf) && !pCorDom(phiSet[k],currentCommandee))
						{
							vcount++;
						};
						if(!pCorDom(phiSet[k],currentLeaf) && pCorDom(phiSet[k],currentCommandee))
						{
							vcount++;
						};
					};
				};	
			}
		}
		return vcount;
	};
	
	function globalGroup(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var currentLeaf = sLeaves[i];
			var comSet = commands(sTree,currentLeaf);
			for(var j = 0; j < comSet.length; j++)
			{
				var currentCommandee = comSet[j];
				
					var phiSet = getPhis(pTree);
					for(var k = 0; k < phiSet.length; k++)
					{
						if(pCorDom(phiSet[k],currentLeaf) && !pCorDom(phiSet[k],currentCommandee))
						{
							vcount++;
						};
						if(!pCorDom(phiSet[k],currentLeaf) && pCorDom(phiSet[k],currentCommandee))
						{
							vcount++;
						};
					};
				
			}
		}
		return vcount;
	};
	
	//Assign a violation if an adjacent non-c-pair doesn't have
	//each word contained in at least one phi that excludes the other.
	function splitApartC(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var current = sLeaves[i];
			if(nextLeaf(sTree,current).length)
			{
				var next = nextLeaf(sTree,current)[0];
				if(mutualNonCommand(sTree,current,next))
				{
					var phiSet = getPhis(pTree);
					var pNextOnly = false;
					var pCurrentOnly = false;
					for(var k = 0; k < phiSet.length; k++)
					{
						if(pCorDom(phiSet[k],current) && !pCorDom(phiSet[k],next))
						{
							pCurrentOnly = true;
						};
						if(pCorDom(phiSet[k],next) && !pCorDom(phiSet[k],current))
						{
							pNextOnly = true;
						};
					};
					if(!pNextOnly || !pCurrentOnly)
					{
						vcount++
					};
				}
			}
		}
		return vcount;
	};
	
	
	//Assign a violation if an adjacent non-c-pair doesn't have
	//each word contained in at least one phi that excludes the other.
	function splitApart(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var current = sLeaves[i];
			if(nextLeaf(sTree,current).length)
			{
				var next = nextLeaf(sTree,current)[0];
				if(mutualNonCommand(sTree,current,next))
				{
					var phiSet = getPhis(pTree);
					var pNextOnly = false;
					var pCurrentOnly = false;
					for(var k = 0; k < phiSet.length; k++)
					{
						if(pCorDom(phiSet[k],current) && !pCorDom(phiSet[k],next))
						{
							pCurrentOnly = true;
						};
						if(pCorDom(phiSet[k],next) && !pCorDom(phiSet[k],current))
						{
							pNextOnly = true;
						};
					};
					if(!pNextOnly)
					{
						vcount++;
					};
					if(!pCurrentOnly)
					{
						vcount++;
					};
				}
			}
		}
		return vcount;
	};
	
	function mutualSplit(sTree,pTree)
	{
		var vcount = 0;
		var sLeaves = getLeaves(sTree);
		for(var i = 0; i < sLeaves.length; i++)
		{
			var current = sLeaves[i];
			if(nextLeaf(sTree,current).length)
			{
				var next = nextLeaf(sTree,current)[0];
				if(!siblings(sTree,current,next))
				{
					var phiSet = getPhis(pTree);
					var pNextOnly = false;
					var pCurrentOnly = false;
					for(var k = 0; k < phiSet.length; k++)
					{
						if(pCorDom(phiSet[k],current) && !pCorDom(phiSet[k],next))
						{
							pCurrentOnly = true;
						};
						if(pCorDom(phiSet[k],next) && !pCorDom(phiSet[k],current))
						{
							pNextOnly = true;
						};
					};
					if(!pNextOnly)
					{
						vcount++;
					};
					if(!pCurrentOnly)
					{
						vcount++;
					};
				}
			}
		}
		return vcount;
	};
	
	//for x a prosodic node, y a syntactic node
	//does x dominate the p-correspondent of y?
	function pCorDom(x,y)
	{
		var answer = false;
		var xLeaves = getLeaves(x);
		for(var i = 0; i < xLeaves.length; i++)
		{
			var cLeaf = xLeaves[i];
			if(cLeaf.id == y.id)
			{
				answer = true;
			};
		};
		return answer;
	};
	
	</script>

</body>

</html>
