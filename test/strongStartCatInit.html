<html>
<head>
	<title>StrongStart(cat init) test</title>

	<link rel="stylesheet" type="text/css" href="../spot.css">
	<link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css">

	<script src="../lib/jszip.min.js"></script>

	<!-- to keep spot.js in sync with the codebase make sure to run jsbuild.sh after making any changes to javascript files in the main directory or in the constraints sub-directory
	(open a terminal, cd into the main directory, type ./jsbuild.sh and hit enter) -->
	<script src="../build/spot.js"></script>
		
</head>

<body style="padding-left: 5%; padding-right: 5%; padding-top: 20px">
	<h2>StrongStart(cat init) Test:</h2>
	<pre id="results-container"></pre>

<script src="https://unpkg.com/chai/chai.js"></script>
<script src="https://unpkg.com/mocha/mocha.js"></script>
<div id="mocha"></div>

<script class="mocha-init">
	mocha.setup('bdd');
	mocha.checkLeaks();
</script>

<script>
	
	var ptreelist=[{id:"CP1",cat:"i",children:[{id:"a",cat:"w"},{id:"b",cat:"w"},{id:"c",cat:"w"}]},
		{id:"root", cat:'i', children:[{cat:'Ft', id:'syllable'}, {cat:'phi', id:'phi', children:[{cat:'w', id:'word'}]}]},
		{id:"CP1",cat:"phi",children:[{id:"a",cat:"Ft"},{cat:"w",id:"XP_4",children:[{id:"b",cat:"w"},{id:"c",cat:"w"}]}]},
		{id:"CP1",cat:"i",children:[{id:"a",cat:"w"},{cat:"phi",id:"XP_4",children:[{id:"b",cat:"w"},{id:"c",cat:"w"}]}]},
		{id:"root",cat:"i",children:[{id:"CP1",cat:"i",children:[{id:"a",cat:"w"},{cat:"phi",id:"XP_4",children:[{id:"b",cat:"w"},{id:"c",cat:"w"}]}]}]},
		{id:"root",cat:"i",children:[{id:"CP1",cat:"phi",children:[{id:"a",cat:"w"},{cat:"phi",id:"XP_4",children:[{id:"b",cat:"w"},{id:"c",cat:"w"}]}]}]},
		{id:"CP1",cat:"i",children:[{id:"a",cat:"w"},{cat:"i",id:"XP_4",children:[{id:"b",cat:"w"},{id:"c",cat:"w"}]}]},
		{id:"CP1",cat:"i",children:[{cat:"phi",id:"XP_4",children:[{id:"a",cat:"w"},{id:"b",cat:"w"}]},{id:"c",cat:"w"}]},
		{id:"CP1",cat:"i",children:[{id:"a",cat:"w"},{cat:"phi",id:"XP_5",children:[{id:"b",cat:"w"}]},{cat:"i",id:"XP_6",children:[{id:"c",cat:"w"},{cat:"phi",id:"XP_7",children:[{id:"d",cat:"w"}]}]}]},
		{"id":"CP1","cat":"i","children":[{"cat":"phi","id":"XP_5","children":[{"cat":"i","id":"XP_6","children":[{"id":"b","cat":"w"},{"cat":"phi","id":"XP_7","children":[{"id":"c","cat":"w"},{"id":"d","cat":"w"}]}]}]}]}];
	ptreelist = ptreelist.map(x => [{id: "StrongStart(cat init) testing", cat: "x0"}, x])

	let assert = chai.assert;
	let testW = (tree, val) => it(parenthesizeTree(tree), function(){assert.equal(strongStart_catInit({}, tree, 'w'), val)});
	let testFt = (tree, val) => it(parenthesizeTree(tree), function(){assert.equal(strongStart_catInit({}, tree, 'Ft'), val)});

	describe("StrongStart(w init) with no violations", function(){
		testW(ptreelist[0][1], 0);
		testW(ptreelist[6][1], 0);
		testW(ptreelist[7][1], 0);
	});

	describe("StrongStart(w init) with one violation", function(){
		testW(ptreelist[3][1], 1);
		testW(ptreelist[4][1], 1);
		testW(ptreelist[5][1], 1);
		testW(ptreelist[9][1], 1);
	});

	describe("StrongStart(w init) with two violations", function(){
		testW(ptreelist[8][1], 2);
	});

	describe("StrongStart(syll init) with one violation", function(){
		testFt(ptreelist[1][1], 1);
		testFt(ptreelist[2][1], 1);
	});

	/*This function executes automatically when the page is reloaded. It calls all the other functions.*/
    window.addEventListener('load', function() {
        writeTableau(makeTableau(ptreelist, ["strongStart_catInit-w", "strongStart_catInit-Ft"]));
		revealNextSegment();
		mocha.run();
	});

</script>

</body>

</html>
