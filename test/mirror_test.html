<html><head> 
    <title>SPOT Automated Testing (mirror_test)</title>
  
  <link rel="stylesheet" type="text/css" href="../spot.css">
  
    <!--If running tests that do not have to do with the interface, run jsbuild.sh or jsbuild.bat
        in root directory of the project. If running interface testing, run testbuild.sh
        or testBuild.bat-->
    <script src="../build/spot.js"></script>
  
    <!--Mocha setup stuff (1/2)-->
    <meta charset="UTF-8">
    <script src="../lib/test/mocha.min.js"></script>
    <script src="../lib/test/chai.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../lib/test/mocha.css">
    <!--mocha setup stuff to be continued in document body-->
    
  </head>
<body style="padding-left: 5%; padding-right: 5%; padding-top: 20px">
    <h2>SPOT Automated Testing</h2>
    <script>
        mocha.setup("bdd"); //brings "describe", "it", etc. into global namespace
            //mocha.checkLeaks();
            var assert = chai.assert; //no one wants to type out "chai.assert" every time
    </script>
    
    <div id="mocha">
        Mirror Automated Test
    </div>
<script>

// x = [[a b][c d]]
var x = {
        "id": "CP1",
        "cat": "xp",
        "children": [
            {
                "cat": "xp",
                "id": "XP_5",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "b",
                        "cat": "x0"
                    }
                ]
            },
            {
                "cat": "xp",
                "id": "XP_6",
                "children": [
                    {
                        "id": "c",
                        "cat": "x0"
                    },
                    {
                        "id": "d",
                        "cat": "x0"
                    }
                ]
            }
        ]
    }

console.log("x = ", parenthesizeTree(x));
console.log("checkMirror(x,{}) = ", checkMirror(x, {}));
// false
console.log("expected: ", false)
console.log("\n")

console.log("mirrorImages(x, [x]) = ", mirrorImages(x, [x]));
// false
console.log("expected: ", false)
console.log("\n")

//y = [[[a] b] [c [d]]]
var y =     {
        "id": "CP1",
        "cat": "xp",
        "children": [
            {
                "cat": "xp",
                "id": "XP_5",
                "children": [
                    {
                        "cat": "xp",
                        "id": "XP_7",
                        "children": [
                            {
                                "id": "a",
                                "cat": "x0"
                            }
                        ]
                    },
                    {
                        "id": "b",
                        "cat": "x0"
                    }
                ]
            },
            {
                "cat": "xp",
                "id": "XP_6",
                "children": [
                    {
                        "id": "c",
                        "cat": "x0"
                    },
                    {
                        "cat": "xp",
                        "id": "XP_8",
                        "children": [
                            {
                                "id": "d",
                                "cat": "x0"
                            }
                        ]
                    }
                ]
            }
        ]
    }
console.log("y = ", parenthesizeTree(y));
console.log("mirrorImages(x, [y, x]) = ", mirrorImages(x, [y, x]));
//false
console.log("expected: ", false)
console.log("\n")

//z = [ [[a] b] [c d] ]
var z =
    {
        "id": "CP1",
        "cat": "xp",
        "children": [
            {
                "cat": "xp",
                "id": "XP_5",
                "children": [
                    {
                        "cat": "xp",
                        "id": "XP_7",
                        "children": [
                            {
                                "id": "a",
                                "cat": "x0"
                            }
                        ]
                    },
                    {
                        "id": "b",
                        "cat": "x0"
                    }
                ]
            },
            {
                "cat": "xp",
                "id": "XP_6",
                "children": [
                    {
                        "id": "c",
                        "cat": "x0"
                    },
                    {
                        "id": "d",
                        "cat": "x0"
                    }
                ]
            }
        ]
    }
console.log("z = ", parenthesizeTree(z));
//z2 = [ [a b] [c [d]] ] - should be a mirror of z
var z2 = 
    {
        "id": "CP1",
        "cat": "xp",
        "children": [
            {
                "cat": "xp",
                "id": "XP_5",
                "children": [
                    {
                        "id": "a",
                        "cat": "x0"
                    },
                    {
                        "id": "b",
                        "cat": "x0"
                    }
                ]
            },
            {
                "cat": "xp",
                "id": "XP_6",
                "children": [
                    {
                        "id": "c",
                        "cat": "x0"
                    },
                    {
                        "cat": "xp",
                        "id": "XP_9",
                        "children": [
                            {
                                "id": "d",
                                "cat": "x0"
                            }
                        ]
                    }
                ]
            }
        ]
    }

console.log("z2 = ", parenthesizeTree(z2));
console.log("checkMirror(z, z2) = ", checkMirror(z, z2));
//true //correct
console.log("expected: ", true)
console.log("\n")

console.log("mirrorImages(z2, [x, y, z, z2]) = ", mirrorImages(z2, [x,y, z, z2]));
//true //correct: z2 is a mirror of z
console.log("expected: ", true)
console.log("\n")

console.log("mirrorImages(z, [x, y, z, z2]) = ", mirrorImages(z, [x,y, z, z2]));
//true //incorrect! z should not be a mirror of any preceding tree in the list (x or y)
console.log("expected: ", false)
// console.log("This is a false positive!")
console.log("\n")

// this is still a false positive with just checkMirror,
// but is correct when using mirrorImages
console.log("checkMirror(z, x) = ", checkMirror(z, x));
//true - incorrect!!!
console.log("expected: ", false)
// console.log("This is a false positive!")
console.log("\n")

console.log("checkMirror(x, z) = ", checkMirror(x, z));
//true - incorrect!!!
console.log("expected: ", false)
console.log("\n")

// this is still a false positive with just checkMirror,
// but is correct when using mirrorImages
console.log("checkMirror(z2, y) = ", checkMirror(z2, y));
//true - incorrect!!!
console.log("expected: ", false)
// console.log("This is a false positive!")
console.log("\n")

console.log("mirrorImages(z2, [y, z2]) = ", mirrorImages(z2, [y, z2]));
console.log("expected: ", false)
console.log("\n")

console.log("checkMirror(y, x) = ", checkMirror(y, x));
//false - correct
console.log("expected: ", false)
console.log("\n")

//automated test
describe('checkMirror: check for if trees are mirror images of each other', function() {
            it(parenthesizeTree(x) + '  checkMirror(x, {})', function() {
                assert.equal(checkMirror(x, {}), false);
            });

            it(parenthesizeTree(z2) + '  checkMirror(z, z2)', function() {
                assert.equal(checkMirror(z, z2), true);
            });

            it('checkMirror(z, x)', function() {
                assert.equal(checkMirror(z, x), false);
            });

            it('checkMirror(x, z)', function() {
                assert.equal(checkMirror(x, z), false);
            });

            it('checkMirror(z2, y)', function() {
                assert.equal(checkMirror(z2, y), false);
            });

            it('checkMirror(y, x)', function() {
                assert.equal(checkMirror(y, x), false);
            });
        });

describe('mirrorImages: Returns true if sTree is a mirror of an earlier tree in sTreeList. Returns false if Stree is not a mirror image of an earlier tree in sTreeList', function() {
            it(parenthesizeTree(x) + '  mirrorImages(x, [x])', function() {
                assert.equal(mirrorImages(x, [x]), false);
            });

            it(parenthesizeTree(y) + '  mirrorImages(x, [y, x])', function() {
                assert.equal(mirrorImages(x, [y, x]), false);
            });

            it('mirrorImages(z2, [x,y, z, z2])', function() {
                assert.equal(mirrorImages(z2, [x,y, z, z2]), true);
            });

            it('mirrorImages(z, [x,y, z, z2])', function() {
                assert.equal(mirrorImages(z, [x,y, z, z2]), false);
            });

            it('mirrorImages(z2, [y, z2])', function() {
                assert.equal(mirrorImages(z2, [y, z2]), false);
            });
        });
        mocha.run(); //don't forget to run the test!!!
</script>

</body>
</html>
