<html><head> 
    <title>SPOT Automated Testing</title>

	<link rel="stylesheet" type="text/css" href="../spot.css">

    <!--If running tests that do not have to do with the interface, run jsbuild.sh or jsbuild.bat
        in root directory of the project. If running interface testing, run testbuild.sh
        or testBuild.bat-->
    <script src="../build/spot.js"></script>

    <!--Mocha setup stuff (1/2)-->
    <meta charset="UTF-8">
    <script src="../lib/test/mocha.min.js"></script>
    <script src="../lib/test/chai.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../lib/test/mocha.css">
    <!--mocha setup stuff to be continued in document body-->
    
</head>
<body style="padding-left: 5%; padding-right: 5%; padding-top: 20px">

    <h2>SPOT Automated Testing</h2>

    <!--Mocha stuff (2/2)-->
    <script>
        mocha.setup("bdd"); //brings "describe", "it", etc. into global namespace
        //mocha.checkLeaks();
        var assert = chai.assert; //no one wants to type out "chai.assert" every time
    </script>
    <div id="mocha">
        This is where test results should show up
    </div>
    <!--Mocha is set up now, you just need to write and run tests-->
    <script>
        var fiveTree = {cat:'phi', id:'x', children:[{id:'w1', cat:'w'},{id:'w2', cat:'w'},{id:'w3', cat:'w'},{id:'w4', cat:'w'},{id:'w5', cat:'w'}]};

        describe('Compare violations of n-arity for '+parenthesizeTree(fiveTree)+', tests maximality only', function() {
            it('binMaxBranches(phi) assigns differing violations depending on argument n', function() {
                assert.equal(binMaxBranches({}, fiveTree, 'phi'), 1);
                assert.equal(binMaxBranches({}, fiveTree, 'phi', 3), 1);
                assert.equal(binMaxBranches({}, fiveTree, 'phi', 5), 0);
            });
            it('binMaxLeaves(phi) assigns differing violations depending on argument n', function() {
                assert.equal(binMaxLeaves({}, fiveTree, 'phi'), 1);
                assert.equal(binMaxLeaves({}, fiveTree, 'phi', 3), 1);
                assert.equal(binMaxLeaves({}, fiveTree, 'phi', 5), 0);
            });
            it('binMaxGradient(phi) assigns differing violations depending on argument n', function() {
                assert.equal(binMaxBranchesGradient({}, fiveTree, 'phi'), 3);
                assert.equal(binMaxBranchesGradient({}, fiveTree, 'phi', 3), 2);
                assert.equal(binMaxBranchesGradient({}, fiveTree, 'phi', 4), 1);
                assert.equal(binMaxBranchesGradient({}, fiveTree, 'phi', 5), 0);
            });
            it('min+max binarity do use n', function(){
                let comment = 'This is the only set of tests that uses binMin at all in this document';
                assert.equal(binBranches({}, fiveTree, 'phi', 5), 0);
                assert.equal(binBrGradient({}, fiveTree, 'phi', 5), 0);
                assert.equal(binLeaves({}, fiveTree, 'phi', 5), 0);
                assert.equal(binLeavesGradient({}, fiveTree, 'phi', 5), 0);
                //let comment = 'These tests show that they return different values if n!=5';
                assert.equal(binBranches({}, fiveTree, 'phi'), 1);
                assert.equal(binBrGradient({}, fiveTree, 'phi'), 3);
                assert.equal(binLeaves({}, fiveTree, 'phi'), 1);
                assert.equal(binLeavesGradient({}, fiveTree, 'phi'), 3);
            })
        });
        
        mocha.run(); //don't forget to run the test!!!
    </script>
    <!--That's all you need for testing with mocha and chai-->

	<pre id="results-container"></pre>

<script>
    window.addEventListener("load", function(){
		// GEN is defined in candidategenerator.js
		// Arguments: 
		// - syntactic tree object, which appears in the first cell of the table
		// - a string consisting of a space separated list of terminals
		// Returns: an array of pairs <stree, ptree>
		var myCandSet = GEN({}, 'a b c d e f', {obeysExhaustivity:true, noUnary:true});

        let n = 2;
		// Array of string versions of function names
        // Category arguments for the functions appear after a hyphen
        var myConstraintSet = ['binMaxBranches-phi', 'ternMaxBranches-phi'];

		// makeTableau() is defined in tableauMaker.js
		var myTableau = makeTableau(myCandSet, myConstraintSet);

		//Defined in prototypeInterface.js
		writeTableau(myTableau);
		
		//Unhide the tableau div in the html
        revealNextSegment();
    });

</script>

</body></html>
